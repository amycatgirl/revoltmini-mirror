<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RevoltMini</title>

  <link rel="stylesheet" href="public/css/index.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined">

  <!-- Needed for basic functionality, sorry noscript/librejs users -->
  <script src="//unpkg.com/@ungap/custom-elements"></script>
  <script defer type="module" src="scripts/index.js"></script>
  <script defer type="module" src="scripts/components/index.js"></script>

  <!-- Needed for markdown -->
  <script src="https://cdn.jsdelivr.net/npm/marked/lib/marked.umd.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify/dist/purify.min.js"></script>
  <!-- TODO: Add LibMFM whenever that comes out -->

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="public/favicon.svg" type="image/svg+xml" />
</head>

<body>
  <noscript>
    <!--TODO: Style this to be an overlay-->
    <div class="error">
      <h1>Oops! It seems that you've disabled Javascript for this site!</h1>
      <p>Hi, Amy here.</p>
      <p>You seem to have some sort of noscript extension installed that is
        blocking execution of files that RevoltMini depends on.</p>
      <p>If you are not using a noscript extension but using libreJS, please
        whitelist RevoltMini's files and JSDelivr files to continue using
        RevoltMini.</p>
      <p>My source code is available under the MIT License over at
        <a href="https://codeberg.org/amycatgirl/revoltmini">amycatgirl/revoltmini</a>
        if you want to peek through code.
      </p>
    </div>
  </noscript>
  <main id="login">
    <header>
      <h1 id="name">RevoltMini</h1>
      <p>Lightweight Web Client</p>
    </header>
    <form>
      <input type="email" placeholder="Email" />
      <input type="password" placeholder="Password" />
      <label id="persistent">
        <input type="checkbox" checked></input>
        Use persistent session
      </label>
      <button id="login" type="submit">Login</button>
    </form>
    <section id="about">
      <details id="whatis" open>
        <summary>What is RevoltMini?</summary>
        <p>RevoltMini is a lightweight client for revolt.chat, which aims to
          be a fast, accessible client for low-end, mobile devices.</p>
      </details>
      <details id="howdoi" open>
        <summary>How do I use RevoltMini?</summary>
        <p>To navigate around the client, use the bar at the top. The first
          select input contains all of the servers you have joined. The second
          input contains the selected server's channels. Select one to go inside
          of a server/channel and you should be able to talk inside said channel.</p>
      </details>
      <details id="features" open>
        <summary>What does RevoltMini support?</summary>
        <p>RevoltMini supports the following features:</p>
        <ul>
          <li>Websockets</li>
          <li>Sending messages</li>
          <li>Attachments in messages</li>
          <li>2FA (through authenticator codes)</li>
          <li>Email Login</li>
          <li>Partial Markdown support</li>
          <li>Temporary Login using Cookies</li>
          <li>Masquerades</li>
        </ul>
      </details>
      <details id="wontfix" open>
        <summary>Will there be feature parity with Revite/frontend?</summary>
        <p>No. I do not plan 1:1 feature parity with Revite. <br />
          Only the bare minimum amount of features will be implemented inside
          of RevoltMini to keep it lightweight and easy to run.</p>
        <p>Some notable features include:</p>
        <ul>
          <li>Roles and Permissions</li>
          <li>Settings</li>
          <li>Multiple Sessions</li>
          <li>Topics (Channel descriptions)</li>
        </ul>
      </details>
    </section>
  </main>
  <main id="app" class="hidden">
    <div class="container">
      <aside class="sidebar">
        <div class="servers">
          <server-icon self server-name="amycatgirl"></server-icon>
          <hr class="divider" />
          <div class="list">
            <server-icon></server-icon>
            <server-icon></server-icon>
            <server-icon></server-icon>
            <server-icon></server-icon>
            <server-icon></server-icon>
            <server-icon></server-icon>
            <server-icon></server-icon>
            <server-icon></server-icon>
            <server-icon></server-icon>
            <server-icon></server-icon>
            <server-icon></server-icon>
          </div>
        </div>
        <div class="channels">
          <header>
            <h1>Home</h1>
          </header>
          <ul class="options">
            <li><material-symbols name="group"></material-symbols>
              <p>Friends</p>
            </li>
            <li><material-symbols name="group"></material-symbols>
              <p>Friends</p>
            </li>
            <li><material-symbols name="group"></material-symbols>
              <p>Friends</p>
            </li>
            <li><material-symbols name="group"></material-symbols>
              <p>Friends</p>
            </li>
          </ul>
        </div>
      </aside>
      <section class="view">
        <header id="top" class="bar flex stick anchor-top anchor-left">
          <nav>
            <form id="navigation">
              <select name="DEFAULT" id="server">
                <option value="DEFAULT">Select a server</option>
              </select>
              <select id="channel">
              </select>
            </form>
          </nav>
          <snackbar-indicator id="cache" spinner-type="ring" hidden="true">
            Populating Cache...
          </snackbar-indicator>
          <snackbar-indicator id="reconnecting" variant="warning" spinner-type="dot" hidden="true">
            Reconnecting...
          </snackbar-indicator>
          <snackbar-indicator id="lostconnection" variant="error" spinner-type="none" hidden="true">
            Lost connection to Revolt.
          </snackbar-indicator>
        </header>
        <section id="middle">
          <div class="intro">
            <h1>Welcome to RevoltMini!</h1>
            <p>Use the dropdowns to navigate across servers</p>
            <p>Push notifications are available for mobile/desktop devices, but it needs your permission to enable them.
              Click the button below to allow RevoltMini to send notifications</p>
            <button id="push"><material-symbols name="notifications"></material-symbols> Request Notification
              Permission</button>
            <p>To log out, use the button below</p>
            <button id="logout"><material-symbols optical-size="9" name="logout"></material-symbols> Log out from
              revolt</button>
          </div>
        </section>
        <section id="messagebox" class="bar flex stick anchor-bottom anchor-left">
          <snackbar-indicator id="typing" hidden="true">No users typing</snackbar-indicator>
          <form id="compose" class="grid">
            <input type="file" accept="*" id="attach" />
            <label for="attach"><material-symbols name="attach_file_add" /></label>
            <textarea type="text" id="content" placeholder="Send message"></textarea>
            <button id="send"><material-symbols name="send" /></button>
          </form>
        </section>
      </section>
    </div>
  </main>

  <template id="intro">
    <div class="intro">
      <h1>Welcome to RevoltMini!</h1>
      <p>Use the dropdowns to navigate across servers</p>
      <p>Push notifications are available for mobile/desktop devices, but it needs your permission to enable them.
        Click the button below to allow RevoltMini to send notifications</p>
      <button id="push"><material-symbols name="notifications"></material-symbols> Request Notification
        Permission</button>
      <p>To log out, use the button below</p>
      <button id="logout"><material-symbols optical-size="9" name="logout"></material-symbols> Log out from
        revolt</button>
    </div>
  </template>
</body>

</html>